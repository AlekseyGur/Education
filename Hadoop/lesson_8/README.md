# Урок 8. Хранилища данных

## Задачи

- Какие минусы или опасные места HDFS?
- Что такое блок HDFS?
- Это наименьшая единица данных в файловой системе.
- Для чего используется NameNode?
- Для чего используется DataNode?
- Что будет, если записать много маленьких файлов в HDFS?
- Что будет, если несколько DataNode внезапно отключатся?
- Как проадпейдить несколько записи в большом файле на hdfs?
- *Почему задачи на YARN нестабильны?
- Что такое Hive?
- Что хранит HiveMetastore?
- Чем отличается external table и managed table?
- *Какие форматы умеет читать Hive?
- *Чем отличается управление ресурсов в Hive и Impala?
- Чем отличается колочный формат хранения данных от строчного?
- Чем отличается parquet/orc от csv?
- Чем отличается Avro от json?
- *Чем отличается документориетированный формат данных от реляционного?
- Чем отличается etl и elt?
- Какие основные челенджы etl?
- Какие инструменты etl вы знаете?
- Для чего нужны key-value СУБД?
- Какие сложности стриминга в hdfs?
- *Какие минусы key-value хранилищ?
- Из чего состоит хранилище данных?
- Какие виды хранилищ данных вы знаете?

Задачи со * предназначены для продвинутых учеников, которым мало сделать обычное ДЗ

## Решение

* **Что такое Hadoop?**<br>
Набор программ для распределённого хранения и обработки данных. В него входит так же HDFS, YARN и MapReduce

* **Что такое HDFS?**<br>
Hadoop Distributed File System - распределенная отказоустойчивая файловая система, приспособленная для запуска на серверах любой ценовой категории.

* ***Что такое YARN?** <br>
Yet Another Resource Negotiator - система для планирования заданий и управления кластером. Исполоьзует логику MapReduce.

* **Какие минусы или опасные места HDFS?** <br>
Большой размер блока (сотни мегабайт) не даёт использовать систему для хранения мелких файлов. Медленно делает процедуру записи так как нужна репликация.

* **Что такое блок HDFS?** <br>
Минимальный размер данных, который хранится в системе.

* **Для чего используется NameNode?** <br>
ТАм хранится матаинформация о положении файлов по блокам

* **Для чего используется DataNode?** <br>
Непосредственно для хранения данных.

* **Что будет, если записать много маленьких файлов в HDFS?** <br>
Быстро закончится свободное место.

* **Что будет, если несколько DataNode внезапно отключатся?** <br>
Если это были не все DataNode в системе, то данные продолжат браться с оставшихся.

* **Как проадпейдить несколько записи в большом файле на hdfs?** <br>
Обновление можно сделать только перезаписью файла целиком

* ***Почему задачи на YARN нестабильны?** <br>
Плохо работает распределитель ресурсов по выполняющим нодам.

* **Что такое Hive?** <br>
Это СУБД, которая работает с данными внутри HDFS. С её помощью можно делать SQL запросы к данным.

* **Что хранит Hive Metastore?** <br>
В Hive Metastore хранится информация о таблицах и их положении на серверах в HDFS

* **Чем отличается external table и managed table?** <br>
managed table - таблицы, которые создаются и управляются из hive. А при их удалении они не остаются на диске.<br>
external table - таблица, которая использует внешний файл как источник (напр. csv). Если удалить её из hive, то файл всё равно останется.

* ***Какие форматы умеет читать Hive?** <br>
Текстовый формат (csv), ORC, PARQUET, AVRO. Ещё может Key-Value и Sequence форматы.

* ***Чем отличается управление ресурсов в Hive и Impala?** <br>
Hive отказоустойчивый, Impala - нет.
Impala использует MPP для параллельной обработки запросов, а Hive - MapReduce
В Impala выполняют простые запросы, чтобы было быстрее, а в Hive сложные.

* **Чем отличается колоночный формат хранения данных от строчного?** <br>
При чтении колонки из строчной базы данных будут прочитаны все строки. А в колоночной только одна колонка. Что намного быстрее.

* **Чем отличается parquet/orc от csv?** <br>
Форматы parquet/orc - колоночный, csv - строчный.<br> 
В parquet/orc можно настроить сжатие.

* **Чем отличается Avro от json?** <br>
В json всё хранится в строках. В Avro для хранения схемы данных используется json, а сами данные могут хранится в бинарном виде.

* ***Чем отличается документориетированный формат данных от реляционного?** <br>
В реляционном формате данные имеют строгие типы, записаны в жёсткую структуру и связаны между собой.<br> Документоориентированный формат может не соответствовать этим рамкам. 

* **Чем отличается etl и elt?** <br>
Порядком операций:<br>
etl - извлечение, преобразование, загрузка<br>
elt - извлечение, загрузка, преобразование<br>
При elt в хранилище сохраняются необработанные данные, чтобы они не пропали. И только затем преобразуются.

* **Какие основные челенджы etl?**  <br>
В etl данные нужно сразу преобразовывать к нужному формату хранения. И только потом загружать в хранилище.

* ***Какие сложности стриминга в hdfs?** <br>
Главная проблема - не превратить озеро данных в болото.

* ***Какие минусы key-value хранилищ?** <br>
Они хранятся в ОЗУ. Если памяти не хватает, то они дают сбой <br>
У некоторых свой уникальный синтаксис запросов (не SQL).

* **Из чего состоит хранилище данных?** <br>
Витрины, метаданных, слоя etl/elt

* **Какие виды хранилищ данных вы знаете?** <br>
Data Warehouse - хранит структурированные обработанные данные. Являетс ячастью Data Lake. <br>
Data Lake - хранит всё в любых форматах.

* ***Основные задачи Data governance?** <br>
Смотреть чтобы Data Lake не превратилось в болото.
