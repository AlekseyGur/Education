# Урок 2. Изучение характера поведения пользователей

## Задание

Всем привет! Ребята в тексте ссылка на статью по прогонозу с учетом сезонности и тренда. ( https://4analytics.ru/prognozirovanie/kak-rasschitat-prognoz-prodaj-s-uchetom-rosta-i-sezonnosti-v-excel.html ).
Ваша задача прочитать статью и потом на основе данных к прошлому ДЗ сделать прогноз ТО на 2018 по этой методологии. И сравнить с фактом:
ГГММ Сумма
1801 256798898
1802 232640416
1803 267994924
1804 262849522
1805 276933049
1806 251486085
1807 250559778
1808 261724749
1809 276675505
1810 287647539
1811 363102609
1812 422386052
Как результат прогноза можете прислать скрин рассчета и сравнения. Вопрос: почему прогноз получается выше факта?

## Решение

Получаем из базы данных 1 урока информацию по сумме продаж

```SQL
SELECT 
    DATE_FORMAT(o_date,'%y%m') AS YYYYMM,
    SUM(price) AS sells
FROM
    orders
GROUP BY
    YYYYMM
ORDER BY
    YYYYMM;
```

Результат запроса:

| YYMM | sells              |
|------|--------------------|
| 1601 |  96812334.96044827 |
| 1602 |  95436530.77782059 |
| 1603 | 115270625.48609066 |
| 1604 |  139324010.7350998 |
| 1605 | 108587343.23582172 |
| 1606 |  116676502.6746378 |
| 1607 | 113191827.61317444 |
| 1608 | 139561892.40846622 |
| 1609 | 152917024.48203468 |
| 1610 | 211633380.72301722 |
| 1611 | 256654031.91054076 |
| 1612 | 258957148.10312712 |
| 1701 | 177191391.36796618 |
| 1702 |  161617657.5208788 |
| 1703 |  214789307.6102438 |
| 1704 | 197661209.96623075 |
| 1705 | 217075552.50557518 |
| 1706 |  184955837.5786047 |
| 1707 | 187225893.48038292 |
| 1708 | 205855839.99133873 |
| 1709 | 212034384.40673923 |
| 1710 |  280213678.8932524 |
| 1711 |  326694751.3766872 |
| 1712 |  372349286.2933359 |


Линейная регрессия имеет формулу:

sells = 841502,053952271 * YYMM - 1204669508,86771

Добавляем даны в столбец "YYMM" до середины 19 года. Используя формулу выше, делаем предсказание:

 YYMM |    sells	 | Предсказание
------|--------------|--------------
 1601 | 96812334,96  | 142575279,51
 1602 | 95436530,78  | 143416781,56
 1603 | 115270625,49 | 144258283,62
 1604 | 139324010,74 | 145099785,67
 1605 | 108587343,24 | 145941287,73
 1606 | 116676502,67 | 146782789,78
 1607 | 113191827,61 | 147624291,83
 1608 | 139561892,41 | 148465793,89
 1609 | 152917024,48 | 149307295,94
 1610 | 211633380,72 | 150148798,00
 1611 | 256654031,91 | 150990300,05
 1612 | 258957148,10 | 151831802,10
 1701 | 177191391,37 | 226725484,91
 1702 | 161617657,52 | 227566986,96
 1703 | 214789307,61 | 228408489,01
 1704 | 197661209,97 | 229249991,07
 1705 | 217075552,51 | 230091493,12
 1706 | 184955837,58 | 230932995,17
 1707 | 187225893,48 | 231774497,23
 1708 | 205855839,99 | 232615999,28
 1709 | 212034384,41 | 233457501,34
 1710 | 280213678,89 | 234299003,39
 1711 | 326694751,38 | 235140505,44
 1712 | 372349286,29 | 235982007,50
 1801 |              | 310875690,30
 1802 |              | 311717192,35
 1803 |              | 312558694,41
 1804 |              | 313400196,46
 1805 |              | 314241698,52
 1806 |              | 315083200,57
 1807 |              | 315924702,62
 1808 |              | 316766204,68
 1809 |              | 317607706,73
 1810 |              | 318449208,79
 1811 |              | 319290710,84
 1812 |              | 320132212,89
 1901 |              | 395025895,70
 1902 |              | 395867397,75
 1903 |              | 396708899,80
 1904 |              | 397550401,86
 1905 |              | 398391903,91
 1906 |              | 399233405,97

 См. график на изображении predict.jpg
